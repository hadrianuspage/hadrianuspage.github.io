<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Solver NSE</title>
    <link rel="icon" type="image/x-icon" href="https://i.ibb.co/h9KS30y/unnamed.gif.ico">
    <style>
        body {
            font-family: Arial, sans-serif;
            color: #333;
            text-align: center;
            animation: gradient 15s ease infinite;
            background: linear-gradient(270deg, #ff7e5f, #feb47b);
            background-size: 400% 400%;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://ns-assets.ninjasage.id/landing/ns-assets/web_banner/fox_deity.png');
            background-size: cover;
            background-position: center;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .rainbow-text {
            font-size: 48px;
            color: transparent;
            background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
            overflow: hidden;
            white-space: nowrap;
            animation: typing 4s steps(10) forwards, blink 0.75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes blink {
            50% { border-right-color: transparent; }
        }

        .wrapper {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .gradient-blue {
            font-size: 48px;
            background: linear-gradient(90deg, ghostwhite, floralwhite);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
        }

        .center {
            display: flex;
            justify-content: center;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
        }

        .column {
            margin: 20px 0;
        }

        .form-control {
            width: 100%;
            max-width: 300px;
            margin: 10px 0;
        }

        button {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #218838;
        }

        .alert {
            display: none;
            margin: 10px 0;
        }

        #popupModal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.7);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
            position: relative;
        }

        .close {
            position: absolute;
            right: 10px;
            top: 10px;
            color: #aaa;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body oncontextmenu="return false;">
    <audio id="background-music" src="musics/Okaeri.mp3" preload="auto"></audio>

<div id="loading">
    <div class="rainbow-text">LOADING...</div>
</div>

<div class="hidden-content" style="display: none;">
    <h1 class="gradient-blue">Kekkai Solver <br>Ninja Sage</h1>
    <br>
    <center>
        <img src="https://ninjasage.id/assets/images/logo.png" style="width: 150px;" alt="Ninja Sage Logo" />
    </center>
    <br>
    <br>

    <div class="wrapper">
        <div class="center">
            <div class="column">
                <div class="form-row align-items-center">
                    <div class="col-md-1.5">
                        <label for="colorLabels" class="col-form-label">Available Runes:</label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" class="form-control" id="colorLabels" value="Green, Red, Blue, Black, Yellow, White">
                    </div>
                    <div class="col-md-3.5">
                        <label for="numPegs" class="col-form-label">Number of Runes Required for Kekkai Solution:</label>
                    </div>
                    <div class="col-md-1">
                        <select class="form-control" id="numPegs">
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                        </select>
                    </div>
                    <div class="col-md-1">
                        <button id="start" class="btn btn-primary">Start</button>
                    </div>
                </div>
                <div id="input-alert" class="alert alert-danger">There was an error. Please try again.</div>
            </div>
        </div>
        <hr/>
        <div id="play-area">
            <table id="old-guesses-table" class="table table-striped table-hover" style="display: none">
                <thead>
                    <tr><th>History</th><th>Green Position</th><th>Yellow Position</th></tr>
                </thead>
                <tbody id="old-guesses"></tbody>
            </table>
            <div id="cur-guess"></div>
            <div id="cur-guess-alert" class="alert alert-danger">There was an error. Please try again.</div>
            <div id="success" class="alert alert-success">Congratulations! The seal has been broken. Click "Retry" to try again.</div>
            <script id="new-guess-template" type="text/x-handlebars-template">
                <br>
                <div class="guess">Trying <b>{{guess}}</b>. What is the result?</div>
                <div class="form-inline">
                    <br>
                    <label>Green Position: </label>
                    <input type="number" min="0" step="1" max="{{numPegs}}" value="0" class="form-control bothCorrect">
                    <label>Yellow Position: </label>
                    <input type="number" min="0" step="1" max="{{numPegs}}" value="0" class="form-control colorCorrect">
                    <button class="btn btn-primary">Next</button>
                </div>
            </script>
            <script id="old-guess-template" type="text/x-handlebars-template">
                <tr class="evidence"><td>{{guess}}</td><td>{{bothCorrect}}</td><td>{{colorCorrect}}</td></tr>
            </script>
        </div>
    </div>

    <div id="copyright">
        <br>
        <div class="wrapper">
            <center>
                <div style="margin-top: 10px; margin-bottom: 10px;">
                    &copy;2025 <b>Hadrianus</b> All Rights Reserved.
                </div>
                <button id="openPopup" class="btn">Visit Ninja Sage Website</button>
                <br><br>
                <button id="pipMode" class="btn">PIP Mode</button>
                <p>This Kekkai solver website for Ninja Sage will run in the background, so you can use this when you open the Ninja Sage application.</p>
            </center>
        </div>
    </div>
</div>

<div id="popupModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <p>To visit the Ninja Sage website, click the button below:</p>
        <button onclick="window.open('https://ninjasage.id', '_blank');" class="btn">Go to Ninja Sage Website</button>
    </div>
</div>

<script>
    window.onload = function() {
        setTimeout(function() {
            document.getElementById('loading').style.display = 'none';
            document.querySelector('.hidden-content').style.display = 'block';
            document.body.style.backgroundImage = "url('https://cdn.discordapp.com/attachments/969162722140913704/1348429566569349231/mentahan_ns_aniv_full.jpg?ex=681007e5&is=680eb665&hm=7cd4eb521e628ea87e20fbea76dd1a194cec862dffae2f1e62ebf214d85b546e&')";
            document.body.style.backgroundSize = "cover";
            document.body.style.backgroundPosition = "center";

            // Array of image URLs
            const images = [
                "https://ns-assets.ninjasage.id/landing/ns-assets/web_banner/sage_heroes.png",
                "https://ns-assets.ninjasage.id/landing/ns-assets/web_banner/3rd_anniversary_ninja_sage.png",
                "https://ns-assets.ninjasage.id/landing/ns-assets/web_banner/indoneisan_ninja.png",
                "https://ns-assets.ninjasage.id/landing/ns-assets/web_banner/red_fight.jpeg",
                "https://ns-assets.ninjasage.id/landing/ns-assets/web_banner/summer_night_2023.jpg",
                "https://cdn.discordapp.com/attachments/969162722140913704/1350012441890918451/1741937703620.jpg?ex=68108410&is=680f3290&hm=75815121bc21923904a99d34a01cee41f968f3fc1cab406732394f2c4a69edda&",
                "https://cdn.discordapp.com/attachments/969162722140913704/1348548153540083764/NNSG.png?ex=68107656&is=680f24d6&hm=10383e1f057ffed957c866cf94e01212a4f2281ddcd33addb481f9a7f98965e4&",
                "https://cdn.discordapp.com/attachments/969162722140913704/1348495488873267221/1_NSE_3rd_Anniv.png?ex=6810454a&is=680ef3ca&hm=0b0844ba005eea2dbda90144b21f1ec3c6df8998155e58fcccbdbea2a110e0c3&",
                "https://cdn.discordapp.com/attachments/969162722140913704/1348405599972360282/anniversary.jpg?ex=68109a53&is=680f48d3&hm=7bb41b501833d9ab154fe599a9801a5037d6b0f88fb626107a6a3c30b52598ae&",
                "https://cdn.discordapp.com/attachments/969162722140913704/1348302854515064882/final2.jpg?ex=68103aa2&is=680ee922&hm=964bfabe415e0f2138fcdd28b43162f5645bd2fc83480f680a1ec91acc314569&",
                "https://cdn.discordapp.com/attachments/969162722140913704/1348293634906390539/IMG_8302.jpg?ex=6810320c&is=680ee08c&hm=80ce470d0d5e4c598ccbab79d50b8530df13c08374b7d29f2cc9e58f20ee0873&",
                "https://cdn.discordapp.com/attachments/969162722140913704/1348278722293268490/Picsart_25-03-09_19-56-20-682.jpg?ex=68102429&is=680ed2a9&hm=2a830399a4b65d0097adab7e1567f0f73eac0d3a7889940ab09e4393a08f6933&",
                "https://cdn.discordapp.com/attachments/969162722140913704/1343968609214402580/IMG_0947.png?ex=6810480e&is=680ef68e&hm=a22fdd9c6cb3eff1a0c0ba1146bdb8235965b1eafd4be87e13af13f33482c895&",
                "https://cdn.discordapp.com/attachments/911632877538652160/1366349350426509342/image-23-picsay.png?ex=68109f7e&is=680f4dfe&hm=70f91e722e900bdf68cd5a99764c59b33cbdc16912dc6bc754f75bda860cb5b7&"
            ];

            // Function to change background image
            function changeBackgroundImage() {
                const randomIndex = Math.floor(Math.random() * images.length);
                document.body.style.backgroundImage = `url('${images[randomIndex]}')`;
            }

            // Change image every 10 seconds
            setInterval(changeBackgroundImage, 10000);
        }, 3500);
    };

    document.getElementById('start').onclick = function() {
        document.getElementById('background-music').play();
    };

    let pipWindow;

    document.getElementById('pipMode').onclick = function() {
        if (!pipWindow || pipWindow.closed) {
            // Open a small window simulating PIP mode
            pipWindow = window.open('', 'PIP Mode', 'width=400,height=300');
            pipWindow.document.write(`
                <html>
                    <head>
                        <title>PIP Mode</title>
                        <style>
                            body { margin: 0; }
                            iframe { border: none; width: 100%; height: 100%; }
                        </style>
                    </head>
                    <body>
                        <iframe src="${window.location.href}" allow="picture-in-picture"></iframe>
                    </body>
                </html>
            `);
            pipWindow.document.close();

            pipWindow.onbeforeunload = function() {
                pipWindow = null; // Reset on close
            };
        } else {
            pipWindow.focus(); // Bring the window to the front if it’s already open
        }
    };

    var modal = document.getElementById("popupModal");
    var btn = document.getElementById("openPopup");
    var span = document.getElementsByClassName("close")[0];

    btn.onclick = function() {
        modal.style.display = "flex";
    }

    span.onclick = function() {
        modal.style.display = "none";
    }

    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
</script>
</body>
</html>